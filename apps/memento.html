<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Calendar | Memento Mori</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg-color: #0a0a0a;
            --card-bg: #171717;
            --accent: #3b82f6;
            --empty: #262626;
            --filled: #3b82f6;
        }

        body {
            background-color: var(--bg-color);
            color: #ededed;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(52, 1fr);
            gap: 4px;
        }

        @media (max-width: 1024px) {
            .grid-container { gap: 2px; }
        }

        @media (max-width: 640px) {
            .grid-container { grid-template-columns: repeat(26, 1fr); }
        }

        .week-box {
            aspect-ratio: 1;
            border-radius: 2px;
            background-color: var(--empty);
            transition: all 0.3s ease;
        }

        .week-box.lived {
            background-color: var(--filled);
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.3);
        }

        .week-box:hover {
            transform: scale(1.5);
            z-index: 10;
            background-color: #60a5fa;
            cursor: crosshair;
        }

        .tooltip {
            position: absolute;
            background: #262626;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            display: none;
            border: 1px solid #404040;
            z-index: 100;
        }
    </style>
</head>
<body class="p-4 md:p-10">
    <div id="tooltip" class="tooltip"></div>

    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
            <div>
                <h1 class="text-4xl font-bold tracking-tighter mb-2">MEMENTO MORI</h1>
                <p class="text-neutral-500 max-w-md">A visual representation of your time. Each square represents one week of an 80-year life.</p>
            </div>
            
            <div class="bg-[#171717] p-6 rounded-2xl border border-neutral-800 w-full md:w-auto">
                <label class="block text-xs uppercase tracking-widest text-neutral-500 mb-2 font-bold">Your Birthday</label>
                <div class="flex gap-4">
                    <input type="date" id="birthDate" 
                           class="bg-black border border-neutral-700 rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500 transition-colors">
                    <button onclick="updateCalendar()" 
                            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-all">
                        Update
                    </button>
                </div>
            </div>
        </div>

        <!-- Stats Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10">
            <div class="bg-[#171717] border border-neutral-800 p-6 rounded-2xl">
                <div class="text-neutral-500 text-sm font-medium mb-1">Weeks Lived</div>
                <div id="weeksLived" class="text-3xl font-bold">0</div>
            </div>
            <div class="bg-[#171717] border border-neutral-800 p-6 rounded-2xl">
                <div class="text-neutral-500 text-sm font-medium mb-1">Weeks Remaining</div>
                <div id="weeksLeft" class="text-3xl font-bold">4,160</div>
            </div>
            <div class="bg-[#171717] border border-neutral-800 p-6 rounded-2xl">
                <div class="text-neutral-500 text-sm font-medium mb-1">Life Completion</div>
                <div id="percentLife" class="text-3xl font-bold">0%</div>
            </div>
        </div>

        <!-- The Calendar -->
        <div id="calendar" class="grid-container">
            <!-- Weeks generated by JS -->
        </div>

        <div class="mt-12 text-center text-neutral-600 text-sm italic">
            "It is not that we have a short time to live, but that we waste a lot of it." â€” Seneca
        </div>
    </div>

    <script>
        const TOTAL_YEARS = 80;
        const TOTAL_WEEKS = TOTAL_YEARS * 52;
        const calendarEl = document.getElementById('calendar');
        const tooltip = document.getElementById('tooltip');

        // Initialize empty calendar
        function init() {
            calendarEl.innerHTML = '';
            for (let i = 0; i < TOTAL_WEEKS; i++) {
                const week = document.createElement('div');
                week.className = 'week-box';
                week.addEventListener('mouseenter', (e) => showTooltip(e, i));
                week.addEventListener('mouseleave', hideTooltip);
                calendarEl.appendChild(week);
            }
            
            // Try to load from local storage
            const savedDate = localStorage.getItem('memento-mori-dob');
            if (savedDate) {
                document.getElementById('birthDate').value = savedDate;
                updateCalendar();
            }
        }

        function updateCalendar() {
            const birthDateVal = document.getElementById('birthDate').value;
            if (!birthDateVal) return;

            localStorage.setItem('memento-mori-dob', birthDateVal);
            
            const birthDate = new Date(birthDateVal);
            const today = new Date();
            
            const diffInMs = today - birthDate;
            const weeksLived = Math.floor(diffInMs / (1000 * 60 * 60 * 24 * 7));
            
            const boxes = document.querySelectorAll('.week-box');
            boxes.forEach((box, index) => {
                if (index < weeksLived) {
                    box.classList.add('lived');
                } else {
                    box.classList.remove('lived');
                }
            });

            // Update Stats
            document.getElementById('weeksLived').innerText = weeksLived.toLocaleString();
            document.getElementById('weeksLeft').innerText = Math.max(0, TOTAL_WEEKS - weeksLived).toLocaleString();
            document.getElementById('percentLife').innerText = ((weeksLived / TOTAL_WEEKS) * 100).toFixed(1) + '%';
        }

        function showTooltip(e, index) {
            const birthDateVal = document.getElementById('birthDate').value;
            let dateText = `Week ${index + 1}`;
            
            if (birthDateVal) {
                const date = new Date(birthDateVal);
                date.setDate(date.getDate() + (index * 7));
                dateText = date.toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' });
            }

            tooltip.style.display = 'block';
            tooltip.innerText = dateText;
            tooltip.style.left = (e.pageX + 15) + 'px';
            tooltip.style.top = (e.pageY - 35) + 'px';
        }

        function hideTooltip() {
            tooltip.style.display = 'none';
        }

        init();
    </script>
</body>
</html>
